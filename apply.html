<!DOCTYPE html>
<html lang="ko" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë² íƒ€ í…ŒìŠ¤í„° ì‹ ì²­ - GlucoUS</title>
    <meta name="description" content="GlucoUS ë² íƒ€ í…ŒìŠ¤í„°ì— ì‹ ì²­í•˜ì„¸ìš”.">
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#10B981', // GlucoUS Mint
                        primaryDark: '#059669',
                        dark: '#0B0F12',
                        kakao: '#FAE100', // ì¹´ì¹´ì˜¤ ë…¸ë‘
                    },
                    fontFamily: { sans: ['Pretendard', 'sans-serif'] }
                }
            }
        }
    </script>
    <style>
        /* ë¼ë””ì˜¤ ë²„íŠ¼ ì„ íƒ ì‹œ ìŠ¤íƒ€ì¼ */
        .payment-radio:checked + div {
            border-color: #10B981;
            background-color: #ecfdf5;
        }
        .payment-radio:checked + div .check-icon {
            opacity: 1;
            transform: scale(1);
        }
    </style>
</head>
<body class="font-sans text-gray-800 antialiased bg-gray-50">

    <nav class="fixed w-full z-50 bg-white/80 backdrop-blur-md border-b border-gray-100 transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="index.html" class="flex items-center gap-2">
                    <span class="font-bold text-xl tracking-tight text-dark">GlucoUS</span>
                </a>
            </div>
        </div>
    </nav>

    <section class="relative pt-32 pb-20 lg:pt-40">
        <div class="max-w-xl mx-auto px-4">
            
            <div class="text-center mb-10">
                <span class="text-primary font-bold text-sm tracking-wider uppercase mb-2 block">Beta Application</span>
                <h1 class="text-3xl font-bold text-gray-900 mb-4">ë² íƒ€ í…ŒìŠ¤í„° ì‹ ì²­</h1>
                <p class="text-gray-500">
                    ì•„ë˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì‹œë©´<br>í™•ì¸ í›„ 24ì‹œê°„ ë‚´ì— ì•ˆë‚´ ë¬¸ìë¥¼ ë“œë¦½ë‹ˆë‹¤.
                </p>
            </div>

            <div class="bg-white rounded-3xl shadow-xl p-8 border border-gray-100" id="formContainer">
                <form id="applyForm" class="space-y-6">
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-1">ì´ë¦„</label>
                            <input type="text" name="name" required placeholder="ì˜ˆ: í™ê¸¸ë™" class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-1">ì—°ë½ì²˜</label>
                            <input type="tel" name="phone" required placeholder="ì˜ˆ: 010-1234-5678" class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-1">ì´ë©”ì¼</label>
                            <input type="email" name="email" required placeholder="ì˜ˆ: example@gmail.com" class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all">
                        </div>
                    </div>

                    <hr class="border-gray-100 my-6">

                    <div>
                        <h3 class="font-bold text-lg mb-4 flex items-center justify-between">
                            ì˜ˆì•½ê¸ˆ ê²°ì œ
                            <span class="text-primary text-base">5,000ì›</span>
                        </h3>
                        <p class="text-xs text-gray-400 mb-4 bg-gray-50 p-3 rounded-lg">
                            ğŸ’¡ ì˜ˆì•½ê¸ˆì€ 'ë…¸ì‡¼ ë°©ì§€ìš©'ì´ë©°, ë² íƒ€ í…ŒìŠ¤íŠ¸ ì¢…ë£Œ í›„ ê³„ì¢Œë¡œ 100% í™˜ë¶ˆí•´ ë“œë¦½ë‹ˆë‹¤.
                        </p>

                        <div class="space-y-3">
                            <label class="block cursor-pointer group">
                                <input type="radio" name="payment" value="naver" class="payment-radio hidden" checked>
                                <div class="border border-gray-200 rounded-xl p-4 flex items-center justify-between transition-all hover:border-gray-300 group-hover:bg-gray-50">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 bg-[#03C75A] rounded-full flex items-center justify-center text-white font-bold text-xs shrink-0">N</div>
                                        <div>
                                            <p class="font-bold text-gray-800">ë„¤ì´ë²„ ìŠ¤ë§ˆíŠ¸ ìŠ¤í† ì–´</p>
                                            <p class="text-xs text-gray-500">ë„¤ì´ë²„í˜ì´ í¬ì¸íŠ¸ / ì¹´ë“œ ê²°ì œ</p>
                                        </div>
                                    </div>
                                    <div class="check-icon w-6 h-6 bg-primary text-white rounded-full flex items-center justify-center opacity-0 transform scale-50 transition-all duration-300">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                                    </div>
                                </div>
                            </label>

                            <label class="block cursor-pointer group">
                                <input type="radio" name="payment" value="kakao" class="payment-radio hidden">
                                <div class="border border-gray-200 rounded-xl p-4 flex items-center justify-between transition-all hover:border-gray-300 group-hover:bg-gray-50">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 bg-[#FAE100] text-[#371D1E] rounded-full flex items-center justify-center font-bold text-xs shrink-0">pay</div>
                                        <div>
                                            <p class="font-bold text-gray-800">ì¹´ì¹´ì˜¤í˜ì´ ì†¡ê¸ˆ</p>
                                            <p class="text-xs text-gray-500">QRì½”ë“œ ë˜ëŠ” ì•±ìœ¼ë¡œ ì¦‰ì‹œ ì†¡ê¸ˆ</p>
                                        </div>
                                    </div>
                                    <div class="check-icon w-6 h-6 bg-primary text-white rounded-full flex items-center justify-center opacity-0 transform scale-50 transition-all duration-300">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                                    </div>
                                </div>
                            </label>

                            <label class="block cursor-pointer group">
                                <input type="radio" name="payment" value="bank" class="payment-radio hidden">
                                <div class="border border-gray-200 rounded-xl p-4 flex items-center justify-between transition-all hover:border-gray-300 group-hover:bg-gray-50">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center shrink-0">
                                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg>
                                        </div>
                                        <div>
                                            <p class="font-bold text-gray-800">ì¼ë°˜ ê³„ì¢Œì´ì²´</p>
                                            <p class="text-xs text-gray-500">ê¸°ì—…ì€í–‰ (ìˆ˜ìˆ˜ë£Œ ì—†ìŒ)</p>
                                        </div>
                                    </div>
                                    <div class="check-icon w-6 h-6 bg-primary text-white rounded-full flex items-center justify-center opacity-0 transform scale-50 transition-all duration-300">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                                    </div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <button id="submitButton" type="button" onclick="handleSubmit()" class="w-full bg-dark text-white font-bold py-4 rounded-xl text-lg hover:bg-gray-800 transition-transform active:scale-95 shadow-lg">
                        ì‹ ì²­í•˜ê¸°
                    </button>
                    
                </form>
            </div>
        </div>
    </section>

    <div id="kakaoModal" class="fixed inset-0 bg-black/50 z-[60] hidden flex items-center justify-center p-4 backdrop-blur-sm opacity-0 transition-opacity duration-300">
        <div class="bg-white rounded-2xl w-full max-w-sm p-6 shadow-2xl transform scale-95 transition-transform duration-300">
            <div class="text-center mb-4">
                <div class="w-12 h-12 bg-[#FAE100] text-[#371D1E] rounded-full flex items-center justify-center mx-auto mb-3 font-bold">pay</div>
                <h3 class="text-xl font-bold text-gray-900">ì¹´ì¹´ì˜¤í˜ì´ ì†¡ê¸ˆ</h3>
                <p class="text-sm text-gray-500 mt-1">ì˜ˆê¸ˆì£¼: ê¹€ìœ¤ê²¸</p>
            </div>

            <div class="bg-gray-50 p-6 rounded-2xl mb-4 flex justify-center border border-gray-100">
                <img src="./image/KakaoPay_QR.png" alt="ì¹´ì¹´ì˜¤í˜ì´ QRì½”ë“œ" class="w-56 h-56 object-contain shadow-sm rounded-lg">
            </div>

            <div class="space-y-3">
                <button onclick="openKakaoLink()" class="w-full bg-[#FAE100] text-[#371D1E] font-bold py-3 rounded-xl hover:bg-[#FCE220] transition shadow-sm flex items-center justify-center gap-2">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 3c5.523 0 10 3.582 10 8 0 2.65-1.611 5.01-4.14 6.436l1.048 3.868c.084.31-.225.594-.523.465l-4.48-1.936c-.613.104-1.25.167-1.905.167-5.523 0-10-3.582-10-8s4.477-8 10-8z"/></svg>
                    ì†¡ê¸ˆí•˜ê¸° (ì•± ì‹¤í–‰)
                </button>
                <button onclick="finishTransfer('kakao')" class="w-full bg-gray-100 text-gray-700 font-bold py-3 rounded-xl hover:bg-gray-200 transition">
                    ì†¡ê¸ˆ ì™„ë£Œí–ˆì–´ìš”
                </button>
            </div>
            <button onclick="closeModal('kakaoModal')" class="w-full text-gray-400 text-sm mt-4 hover:text-gray-600 underline">ë‹«ê¸°</button>
        </div>
    </div>

    <div id="bankModal" class="fixed inset-0 bg-black/50 z-[60] hidden flex items-center justify-center p-4 backdrop-blur-sm opacity-0 transition-opacity duration-300">
        <div class="bg-white rounded-2xl w-full max-w-sm p-6 shadow-2xl transform scale-95 transition-transform duration-300">
            <div class="text-center mb-6">
                <div class="w-12 h-12 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg>
                </div>
                <h3 class="text-xl font-bold text-gray-900">ì…ê¸ˆ ê³„ì¢Œ ì•ˆë‚´</h3>
                <p class="text-sm text-gray-500 mt-2">ì•„ë˜ ê³„ì¢Œë¡œ <span class="text-primary font-bold">5,000ì›</span>ì„ ì…ê¸ˆí•´ì£¼ì„¸ìš”.</p>
            </div>

            <div class="bg-gray-50 p-4 rounded-xl mb-6 border border-gray-200">
                <div class="text-xs text-gray-500 mb-1">ê¸°ì—…ì€í–‰ (IBK)</div>
                <div class="flex items-center justify-between">
                    <span class="font-mono text-lg font-bold text-gray-800" id="accountNum">457-081955-01-018</span>
                    <button onclick="copyAccount()" class="text-xs bg-white border border-gray-300 px-2 py-1.5 rounded font-bold hover:bg-gray-100 transition text-gray-600">
                        ë³µì‚¬
                    </button>
                </div>
                <div class="text-xs text-gray-500 mt-1">ì˜ˆê¸ˆì£¼: ê¹€ìœ¤ê²¸ (GlucoUS)</div>
            </div>

            <button onclick="finishTransfer('bank')" class="w-full bg-blue-600 text-white font-bold py-3 rounded-xl hover:bg-blue-700 transition shadow-lg shadow-blue-200">
                ì…ê¸ˆ ì™„ë£Œí–ˆì–´ìš”
            </button>
            <button onclick="closeModal('bankModal')" class="w-full text-gray-400 text-sm mt-4 hover:text-gray-600 underline">ë‹«ê¸°</button>
        </div>
    </div>

    <script>
        // ğŸ‘‡ êµ¬ê¸€ Apps Script ì›¹ ì•± URL (êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™)
        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbypgbPxvb47bxBaAynNeYPWhlejHByzcLK6F0_uoHvk0XOYEqzHyfOiFGzUOlWvYmFx/exec";

        // ğŸ‘‡ ì„¤ì •ëœ ë§í¬ ì •ë³´
        const LINKS = {
            NAVER: "https://smartstore.naver.com/glucous/products/12958673126",
            KAKAO: "https://qr.kakaopay.com/Ej7zVHtq09c401971"
        };

        // í¼ ì œì¶œ ì²˜ë¦¬ + êµ¬ê¸€ ì‹œíŠ¸ ì €ì¥
        function handleSubmit() {
            const form = document.getElementById('applyForm');
            const formData = new FormData(form);
            const submitButton = document.getElementById('submitButton');
            const originalBtnText = submitButton.innerText;
            
            // ìœ íš¨ì„± ê²€ì‚¬
            if (!formData.get('name') || !formData.get('phone') || !formData.get('email')) {
                alert('ì‹ ì²­ì ì •ë³´ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const payment = formData.get('payment');

            // ë²„íŠ¼ ë¡œë”© ìƒíƒœ
            submitButton.disabled = true;
            submitButton.innerText = "ì €ì¥ ì¤‘...";

            // FormDataë¥¼ URLSearchParamsë¡œ ë³€í™˜ (Google Apps Scriptì™€ í˜¸í™˜ì„±)
            // ì‹œíŠ¸ í—¤ë”ì™€ ì¼ì¹˜í•˜ë„ë¡ í•œê¸€ í‚¤ ì‚¬ìš©: íƒ€ì„ìŠ¤íƒ¬í”„, ì´ë¦„, ì—°ë½ì²˜, ì´ë©”ì¼, ê²°ì œë°©ì‹
            const params = new URLSearchParams();
            params.append('ì´ë¦„', formData.get('name') || '');
            params.append('ì—°ë½ì²˜', formData.get('phone') || '');
            params.append('ì´ë©”ì¼', formData.get('email') || '');
            params.append('ê²°ì œë°©ì‹', payment || '');

            // 1) êµ¬ê¸€ ì‹œíŠ¸ë¡œ ë°ì´í„° ì „ì†¡ (no-cors ëª¨ë“œ ì‚¬ìš©)
            fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: params
            })
            .then(() => {
                // no-cors ëª¨ë“œì—ì„œëŠ” ì‘ë‹µì„ ë°›ì„ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ í•­ìƒ ì„±ê³µìœ¼ë¡œ ì²˜ë¦¬
                // ì‹¤ì œ ì €ì¥ ì—¬ë¶€ëŠ” Google Sheetsì—ì„œ í™•ì¸ í•„ìš”
                
                // 2) GA4 ì´ë²¤íŠ¸ ì „ì†¡
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'submit_application', { 
                        'event_category': 'conversion', 
                        'event_label': payment 
                    });
                }

                // 3) ê²°ì œ ë°©ì‹ë³„ ë¶„ê¸°
                if (payment === 'naver') {
                    if (confirm('ì‹ ì²­ ì •ë³´ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\në„¤ì´ë²„ ìŠ¤ë§ˆíŠ¸ ìŠ¤í† ì–´ë¡œ ì´ë™í•©ë‹ˆë‹¤.\nêµ¬ë§¤ë¥¼ ì™„ë£Œí•´ì£¼ì…”ì•¼ ì‹ ì²­ì´ í™•ì •ë©ë‹ˆë‹¤.')) {
                        window.open(LINKS.NAVER, '_blank');
                        showSuccessPage('naver');
                    } else {
                        // ì‚¬ìš©ìê°€ ì·¨ì†Œí•œ ê²½ìš° ë²„íŠ¼ ìƒíƒœ ë³µêµ¬
                        submitButton.disabled = false;
                        submitButton.innerText = originalBtnText;
                    }
                } else if (payment === 'kakao') {
                    // ì¹´ì¹´ì˜¤í˜ì´ ëª¨ë‹¬ ì—´ê¸° (ì‹¤ì œ ì†¡ê¸ˆ ì™„ë£ŒëŠ” ëª¨ë‹¬ì—ì„œ ì²˜ë¦¬)
                    openModal('kakaoModal');
                    submitButton.disabled = false;
                    submitButton.innerText = originalBtnText;
                } else if (payment === 'bank') {
                    // ê³„ì¢Œì´ì²´ ëª¨ë‹¬ ì—´ê¸°
                    openModal('bankModal');
                    submitButton.disabled = false;
                    submitButton.innerText = originalBtnText;
                }
            })
            .catch(error => {
                console.error('Error!', error);
                alert('ì¼ì‹œì ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                submitButton.disabled = false;
                submitButton.innerText = originalBtnText;
            });
        }

        // --- ëª¨ë‹¬ ê¸°ëŠ¥ ---
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.remove('hidden');
            setTimeout(() => {
                modal.classList.remove('opacity-0');
                modal.querySelector('div').classList.remove('scale-95');
                modal.querySelector('div').classList.add('scale-100');
            }, 10);
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.add('opacity-0');
            modal.querySelector('div').classList.remove('scale-100');
            modal.querySelector('div').classList.add('scale-95');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        function openKakaoLink() {
            window.open(LINKS.KAKAO, '_blank');
        }

        function copyAccount() {
            const accountText = document.getElementById('accountNum').innerText;
            // í•˜ì´í”ˆ ì œê±°í•˜ê³  ë³µì‚¬
            const cleanAccount = accountText.replace(/-/g, '').replace(/ /g, '');
            
            navigator.clipboard.writeText(cleanAccount).then(() => {
                alert('ê³„ì¢Œë²ˆí˜¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }).catch(() => {
                alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”: ' + cleanAccount);
            });
        }

        function finishTransfer(type) {
            const modalId = type === 'kakao' ? 'kakaoModal' : 'bankModal';
            closeModal(modalId);
            showSuccessPage(type);
        }

        // --- ì™„ë£Œ í™”ë©´ ì „í™˜ ---
        function showSuccessPage(type) {
            const container = document.getElementById('formContainer');
            let message = "";
            let subMessage = "í™•ì¸ í›„ 24ì‹œê°„ ì´ë‚´ì— í™•ì • ë¬¸ìë¥¼ ë³´ë‚´ë“œë¦½ë‹ˆë‹¤.";
            
            if(type === 'naver') {
                message = "ë„¤ì´ë²„ ìŠ¤í† ì–´ ê²°ì œ í™•ì¸ ëŒ€ê¸° ì¤‘";
                subMessage = "ìŠ¤í† ì–´ì—ì„œ ê²°ì œë¥¼ ë§ˆì³ì£¼ì…”ì•¼ ìµœì¢… í™•ì •ë©ë‹ˆë‹¤.";
            } else if (type === 'kakao') {
                message = "ì¹´ì¹´ì˜¤í˜ì´ ì†¡ê¸ˆ í™•ì¸ ìš”ì²­ ì™„ë£Œ";
            } else {
                message = "ê³„ì¢Œ ì…ê¸ˆ í™•ì¸ ìš”ì²­ ì™„ë£Œ";
            }

            container.innerHTML = `
                <div class="text-center py-12 animate-fade-in-up">
                    <div class="w-20 h-20 bg-green-100 text-primary rounded-full flex items-center justify-center mx-auto mb-6">
                        <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-2">${message}</h3>
                    <p class="text-gray-600 mb-8 leading-relaxed">${subMessage}</p>
                    <a href="index.html" class="block w-full bg-dark text-white font-bold py-4 rounded-xl hover:bg-gray-800 transition">
                        í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
                    </a>
                </div>
            `;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>
</html>